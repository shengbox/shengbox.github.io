(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{VgeG:function(e,t,a){e.exports={normal:"normal___pMD1r",form:"form___3KfER"}},qCgE:function(e,t,a){"use strict";a.r(t);a("g9YV");var n,r,l,i,o,s,c=a("wCAj"),d=a("jehZ"),m=a.n(d),p=(a("14J3"),a("BMrR")),u=(a("jCWc"),a("kPKH")),h=a("eHn4"),f=a.n(h),E=(a("+L6B"),a("2/Rp")),y=(a("zYCJ"),a("4dqd")),b=a.n(y),g=a("p0pE"),I=a.n(g),x=a("2Taf"),w=a.n(x),v=a("vZ4D"),k=a.n(v),_=a("l4Ni"),C=a.n(_),N=a("ujKo"),P=a.n(N),R=a("MhPg"),O=a.n(R),T=(a("iQDF"),a("+eQT")),V=a("q1tI"),K=a.n(V),M=a("MuoO"),S=a("7Qib"),D=a("Qyje"),F=a("wd/R"),Y=a.n(F),q=a("Kvkj"),j=(a("2qtc"),a("kLXV")),z=a("Y/ft"),J=a.n(z),Q=(a("OaEy"),a("2fM7")),A=(a("5NDa"),a("5rEg")),B=(a("y8nQ"),a("Vl3Y")),L=a("je13"),G=a.n(L),H=a("VgeG"),Z=a.n(H),W=B["a"].Item,X=A["a"].TextArea,U=Q["a"].Option,$={labelCol:{span:6},wrapperCol:{span:14}},ee={labelCol:{span:3},wrapperCol:{span:19}},te=(n=B["a"].create(),n((l=function(e){function t(){var e,a;w()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=P()(t)).call.apply(e,[this].concat(r))),a.state={chooseVisible:!1,selectedRowKeys:[],selectedRows:[]},a.handleOk=function(){var e=a.state.selectedRowKeys,t=a.props,n=t.onOk,r=t.form.validateFields;r(function(t,a){if(!t){var r=I()({},a,{report_man:Number(a.report_man),asset_id:e,bill_date:Y()(a.bill_date).format("YYYY-MM-DD")});n(r)}})},a.chooseOpen=function(){a.setState({chooseVisible:!0})},a}return O()(t,e),k()(t,[{key:"render",value:function(){var e=G.a.get("user")||{},t=e.username,a=this.state,n=a.chooseVisible,r=a.selectedRows,l=this.props,i=l.form.getFieldDecorator,o=l.visible,s=l.users,d=J()(l,["form","visible","users"]),h=s.map(function(e){return K.a.createElement(U,{key:e.id},e.name)}),f=[{title:"\u5e8f\u53f7",dataIndex:"\u5e8f\u53f7",width:60,render:function(e,t,a){return K.a.createElement("span",null,a+1)}},{title:"\u8d44\u4ea7\u6761\u7801",dataIndex:"barcode",width:150,render:function(e){return K.a.createElement(b.a,{tooltip:!0,length:10},e)}},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"name",width:150},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"specs",width:150},{title:"SN\u53f7",dataIndex:"SNNo",width:150},{title:"\u4f9b\u5e94\u5546",dataIndex:"provider",width:150},{title:"\u8054\u7cfb\u4eba",dataIndex:"provider_contact",width:100},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"provider_phone",width:150},{title:"\u8d1f\u8d23\u4eba",dataIndex:"maintenance_people",width:150},{title:"\u7ef4\u4fdd\u5230\u671f\u65e5",dataIndex:"maintenance_expired_date",width:150},{title:"\u7ef4\u4fdd\u8bf4\u660e",dataIndex:"maintenance_memo",width:200,render:function(e){return K.a.createElement(b.a,{tooltip:!0,length:10},e)}}];return K.a.createElement("div",null,K.a.createElement(j["a"],m()({},d,{visible:o&&!n,onOk:this.handleOk}),K.a.createElement(B["a"],{className:Z.a.form},K.a.createElement(p["a"],null,K.a.createElement(u["a"],{span:12},K.a.createElement(W,m()({label:"\u7ef4\u4fee\u5355\u53f7",hasFeedback:!0},$),i("bill_no",{})(K.a.createElement(A["a"],{readOnly:!0,disabled:!0,placeholder:"\u7ef4\u4fee\u5355\u53f7"})))),K.a.createElement(u["a"],{span:12},K.a.createElement(W,m()({label:"\u4e1a\u52a1\u65e5\u671f",hasFeedback:!0},$),i("bill_date",{initialValue:Y()(new Date,"YYYY-MM-DD"),rules:[{required:!0}]})(K.a.createElement(T["a"],{style:{width:"100%"}}))))),K.a.createElement(p["a"],null,K.a.createElement(u["a"],{span:12},K.a.createElement(W,m()({label:"\u5904\u7406\u4eba",hasFeedback:!0},$),i("deal_man",{initialValue:t})(K.a.createElement(A["a"],{readOnly:!0,disabled:!0})))),K.a.createElement(u["a"],{span:12},K.a.createElement(W,m()({label:"\u7ef4\u4fee\u82b1\u8d39",hasFeedback:!0},$),i("money",{})(K.a.createElement(A["a"],{placeholder:"\u7ef4\u4fee\u82b1\u8d39"}))))),K.a.createElement(p["a"],null,K.a.createElement(u["a"],{span:12},K.a.createElement(W,m()({label:"\u72b6\u6001",hasFeedback:!0},$),i("status",{initialValue:"\u7ef4\u4fee\u4e2d",rules:[{required:!0}]})(K.a.createElement(Q["a"],null,K.a.createElement(Q["a"].Option,{value:"\u7ef4\u4fee\u4e2d"},"\u7ef4\u4fee\u4e2d"),K.a.createElement(Q["a"].Option,{value:"\u5df2\u5b8c\u6210"},"\u5df2\u5b8c\u6210"))))),K.a.createElement(u["a"],{span:12},K.a.createElement(W,m()({label:"\u62a5\u4fee\u4eba",hasFeedback:!0},$),i("report_man",{})(K.a.createElement(Q["a"],{placeholder:"\u62a5\u4fee\u4eba"},h))))),K.a.createElement(p["a"],null,K.a.createElement(u["a"],{span:24},K.a.createElement(W,m()({label:"\u7ef4\u4fee\u5185\u5bb9",hasFeedback:!0},ee),i("content",{rules:[{required:!0}]})(K.a.createElement(X,{rows:3}))))),K.a.createElement(p["a"],{style:{marginBottom:16}},K.a.createElement(E["a"],{className:"margin-right",onClick:this.chooseOpen},"\u9009\u62e9\u8d44\u4ea7"),K.a.createElement(E["a"],{className:"margin-right"},"\u5220\u9664")),K.a.createElement(c["a"],{dataSource:r,columns:f,size:"small",pagination:!1,scroll:{x:1500,y:230},rowKey:function(e){return e.id}}))),K.a.createElement(q["b"],this.chooseModalProps))}},{key:"chooseModalProps",get:function(){var e=this,t=this.state.chooseVisible;return{width:960,visible:t,handleChooseCancel:function(){e.setState(I()({},t,{chooseVisible:!1}))},handleChooseOk:function(t,a){e.setState({chooseVisible:!1,selectedRows:t,selectedRowKeys:a})}}}}]),t}(V["PureComponent"]),r=l))||r),ae=(a("bP8k"),a("gFTJ")),ne=(a("Telt"),a("Tckk")),re=function(e){function t(){return w()(this,t),C()(this,P()(t).apply(this,arguments))}return O()(t,e),k()(t,[{key:"render",value:function(){var e=[{title:"\u5e8f\u53f7",dataIndex:"no",render:function(e,t,a){return K.a.createElement("span",null,a+1)}},{title:"\u7167\u7247",dataIndex:"image",render:function(e){return K.a.createElement(ne["a"],{style:{marginLeft:4},src:e})}},{title:"\u8d44\u4ea7\u6761\u7801",dataIndex:"barcode"},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"name"},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"specs"},{title:"SNNo",dataIndex:"SNNo"},{title:"\u53d8\u66f4\u524d\u6240\u5c5e\u516c\u53f8",dataIndex:"belong_company_name"},{title:"\u53d8\u66f4\u524d\u91d1\u989d",dataIndex:"money"}],t=this.props,a=t.item,n=void 0===a?{}:a,r=J()(t,["item"]);return K.a.createElement(j["a"],m()({},r,{footer:null}),K.a.createElement(ae["a"],{bordered:!0,size:"middle"},K.a.createElement(ae["a"].Item,{label:"\u53d8\u66f4\u5355\u53f7"},n.bill_no),K.a.createElement(ae["a"].Item,{label:"\u4e1a\u52a1\u65e5\u671f"},n.bill_date),K.a.createElement(ae["a"].Item,{label:"\u6240\u5c5e\u516c\u53f8\u53d8\u66f4\u4e3a"},"\u676d\u5dde\u9f99\u4f2f\u79d1\u6280\u6709\u9650\u516c\u53f8"),K.a.createElement(ae["a"].Item,{label:"\u91d1\u989d\u53d8\u66f4\u4e3a",span:2},n.money),K.a.createElement(ae["a"].Item,{label:"\u53d8\u66f4\u8bf4\u660e",span:3},n.remark)),K.a.createElement("br",null),K.a.createElement(c["a"],{dataSource:n.asset,pagination:!1,columns:e,size:"middle",rowKey:function(e){return e.id}}))}}]),t}(V["PureComponent"]);a.d(t,"default",function(){return ie});var le=T["a"].RangePicker,ie=(i=Object(M["connect"])(function(e){var t=e.repair,a=e.loading;return{repair:t,loading:a}}),i((s=function(e){function t(){var e,a;w()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=P()(t)).call.apply(e,[this].concat(r))),a.state={selectedRowKeys:[]},a.handleRefresh=function(e){var t=a.props.location,n=t.query,r=t.pathname;S["k"].push({pathname:r,search:Object(D["stringify"])(I()({},n,e),{arrayFormat:"repeat"})})},a.handleDetail=function(e){var t=a.props.dispatch;t({type:"repair/showDetail",payload:e})},a}return O()(t,e),k()(t,[{key:"render",value:function(){var e=this,t=[{title:"\u72b6\u6001",dataIndex:"status"},{title:"\u7ef4\u4fee\u5355\u53f7",dataIndex:"bill_no",render:function(t,a){return K.a.createElement("a",{onClick:function(t){return e.handleDetail(a)}},t)}},{title:"\u7167\u7247",dataIndex:"photo"},{title:"\u4e1a\u52a1\u65e5\u671f",dataIndex:"bill_date"},{title:"\u5904\u7406\u4eba",dataIndex:"deal_man"},{title:"\u62a5\u4fee\u4eba",dataIndex:"report_man"},{title:"\u7ef4\u4fee\u82b1\u8d39",dataIndex:"money"},{title:"\u7ef4\u4fee\u5185\u5bb9",dataIndex:"content"},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u8d44\u4ea7\u660e\u7ec6",children:[{title:"\u8d44\u4ea7\u7f16\u7801",dataIndex:"asset.barcode"},{title:"\u8d44\u4ea7\u7c7b\u522b",dataIndex:"asset_type"},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"asset.name"},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"asset.specs"},{title:"SN\u53f7",dataIndex:"asset.SNNo"},{title:"\u91d1\u989d",dataIndex:"asset.money"},{title:"\u4f7f\u7528\u516c\u53f8",dataIndex:"asset.using_company_name"},{title:"\u4f7f\u7528\u90e8\u95e8",dataIndex:"using_department"},{title:"\u4f7f\u7528\u4eba",dataIndex:"using_people"},{title:"\u7ba1\u7406\u5458",dataIndex:"manager"},{title:"\u6240\u5c5e\u516c\u53f8",dataIndex:"asset.belong_company_name"},{title:"\u533a\u57df",dataIndex:"asset.area_name"},{title:"\u5b58\u653e\u5730\u70b9",dataIndex:"asset.address",render:function(e){return K.a.createElement(b.a,{tooltip:!0,length:10},e)}}]}],a=K.a.createElement(p["a"],{style:{marginBottom:16}},K.a.createElement(u["a"],{span:20},K.a.createElement(E["a"],{type:"primary",className:"margin-right",icon:"plus",onClick:this.filterProps.handleCreate},"\u65b0\u589e"),K.a.createElement(E["a"],f()({icon:"printer",className:"margin-right"},"icon","edit"),"\u7f16\u8f91"),K.a.createElement(E["a"],f()({icon:"printer",className:"margin-right"},"icon","tool"),"\u5f00\u59cb\u7ef4\u4fee"),K.a.createElement(E["a"],f()({icon:"printer",className:"margin-right"},"icon","tool"),"\u5b8c\u6210\u7ef4\u4fee"),K.a.createElement(le,{className:"margin-right",defaultValue:this.filterProps.createTime,onChange:this.filterProps.handleChange}),K.a.createElement(E["a"],{type:"primary",className:"margin-right",icon:"printer"},"\u6253\u5370/\u5bfc\u51fa")));return K.a.createElement(q["h"],{inner:!0},a,K.a.createElement(c["a"],m()({},this.listProps,{columns:t,size:"middle",scroll:{x:1600},rowKey:function(e){return e.id}})),K.a.createElement(te,this.modalProps),K.a.createElement(re,this.detailProps))}},{key:"listProps",get:function(){var e=this,t=this.props,a=t.repair,n=a.list,r=a.pagination,l=t.loading,i=this.state.selectedRowKeys;return{pagination:r,loading:l.effects["repair/query"],dataSource:n,rowSelection:{selectedRowKeys:i,onChange:function(t){e.setState({selectedRowKeys:t})}}}}},{key:"filterProps",get:function(){var e=this,t=this.props,a=t.dispatch,n=t.location.query,r=[];return n.createTime&&n.createTime[0]&&(r[0]=Y()(n.createTime[0])),n.createTime&&n.createTime[1]&&(r[1]=Y()(n.createTime[1])),{createTime:r,handleCreate:function(){a({type:"repair/showModal"})},handleChange:function(t,a){e.handleRefresh({createTime:a})}}}},{key:"modalProps",get:function(){var e=this,t=this.props,a=t.dispatch,n=t.repair,r=n.modalVisible,l=n.modalType,i=n.users;return{users:i,title:"\u7ef4\u4fee\u4fe1\u606f\u767b\u8bb0",visible:r&&("create"===l||"update"===l),width:960,onCancel:function(){a({type:"repair/hideModal"})},onOk:function(t){a({type:"repair/create",payload:t}).then(function(){e.handleRefresh()})}}}},{key:"detailProps",get:function(){var e=this.props,t=e.dispatch,a=e.repair,n=a.modalVisible,r=a.modalType,l=a.currentItem;return{item:l,title:"\u7ef4\u4fee\u4fe1\u606f\u767b\u8bb0",visible:n&&"detail"===r,width:960,onCancel:function(){t({type:"repair/hideModal"})}}}}]),t}(V["PureComponent"]),o=s))||o)}}]);