(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{QGkk:function(e,t,a){"use strict";a.r(t);a("g9YV");var n,r,i,l,s,o,c=a("wCAj"),d=a("jehZ"),m=a.n(d),p=(a("14J3"),a("BMrR")),h=(a("jCWc"),a("kPKH")),u=(a("+L6B"),a("2/Rp")),f=(a("zYCJ"),a("4dqd")),g=a.n(f),w=(a("sRBo"),a("kaz8")),y=a("p0pE"),b=a.n(y),E=a("2Taf"),x=a.n(E),I=a("vZ4D"),k=a.n(I),v=a("l4Ni"),_=a.n(v),C=a("ujKo"),R=a.n(C),N=a("MhPg"),P=a.n(N),S=(a("iQDF"),a("+eQT")),V=a("q1tI"),O=a.n(V),Y=a("MuoO"),M=a("7Qib"),T=a("Qyje"),j=a("wd/R"),K=a.n(j),D=a("Kvkj"),q=(a("2qtc"),a("kLXV")),F=(a("5NDa"),a("5rEg")),Q=a("Y/ft"),B=a.n(Q),z=(a("y8nQ"),a("Vl3Y")),H=a("je13"),J=a.n(H),A=a("bHhV"),G=a.n(A),L=z["a"].Item,Z={labelCol:{span:6},wrapperCol:{span:14}},U=(n=z["a"].create(),n((i=function(e){function t(){var e,a;x()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=_()(this,(e=R()(t)).call.apply(e,[this].concat(r))),a.state={chooseVisible:!1,selectedRowKeys:[],selectedRows:[]},a.handleOk=function(){var e=a.state.selectedRowKeys,t=a.props,n=t.onOk,r=t.form.validateFields;r(function(t,a){if(!t){var r=b()({},a,{asset_id:e,bill_date:K()(a.bill_date).format("YYYY-MM-DD")});n(r)}})},a.chooseOpen=function(){a.setState({chooseVisible:!0})},a}return P()(t,e),k()(t,[{key:"render",value:function(){var e=J.a.get("user")||{},t=e.username,a=this.state,n=a.chooseVisible,r=a.selectedRows,i=this.props,l=i.form.getFieldDecorator,s=(i.item,i.visible),o=B()(i,["form","item","visible"]),d=[{title:"\u5e8f\u53f7",dataIndex:"\u5e8f\u53f7",width:60,render:function(e,t,a){return O.a.createElement("span",null,a+1)}},{title:"\u8d44\u4ea7\u6761\u7801",dataIndex:"barcode",width:150,render:function(e){return O.a.createElement(g.a,{tooltip:!0,length:10},e)}},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"name",width:150},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"specs",width:150},{title:"SN\u53f7",dataIndex:"SNNo",width:150},{title:"\u4f9b\u5e94\u5546",dataIndex:"provider",width:150},{title:"\u8054\u7cfb\u4eba",dataIndex:"provider_contact",width:100},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"provider_phone",width:150},{title:"\u8d1f\u8d23\u4eba",dataIndex:"maintenance_people",width:150},{title:"\u7ef4\u4fdd\u5230\u671f\u65e5",dataIndex:"maintenance_expired_date",width:150},{title:"\u7ef4\u4fdd\u8bf4\u660e",dataIndex:"maintenance_memo",width:200,render:function(e){return O.a.createElement(g.a,{tooltip:!0,length:10},e)}}];return O.a.createElement("div",null,O.a.createElement(q["a"],m()({},o,{visible:s&&!n,onOk:this.handleOk}),O.a.createElement(z["a"],{className:G.a.form},O.a.createElement(p["a"],null,O.a.createElement(h["a"],{span:12},O.a.createElement(L,m()({label:"\u6e05\u7406\u5355\u53f7",hasFeedback:!0},Z),l("bill_no",{})(O.a.createElement(F["a"],{readOnly:!0,disabled:!0,placeholder:"\u6e05\u7406\u5355\u53f7"})))),O.a.createElement(h["a"],{span:12},O.a.createElement(L,m()({label:"\u6e05\u7406\u65e5\u671f",hasFeedback:!0},Z),l("bill_date",{initialValue:K()(new Date,"YYYY-MM-DD"),rules:[{required:!0}]})(O.a.createElement(S["a"],{placeholder:"\u6e05\u7406\u65e5\u671f",style:{width:"100%"}}))))),O.a.createElement(p["a"],null,O.a.createElement(h["a"],{span:12},O.a.createElement(L,m()({label:"\u6e05\u7406\u4eba",hasFeedback:!0},Z),l("deal_man",{initialValue:t,rules:[{required:!0}]})(O.a.createElement(F["a"],{placeholder:"\u6e05\u7406\u4eba",disabled:!0,readOnly:!0})))),O.a.createElement(h["a"],{span:12},O.a.createElement(L,m()({label:"\u6e05\u7406\u8bf4\u660e",hasFeedback:!0},Z),l("remark",{})(O.a.createElement(F["a"],{placeholder:"\u6e05\u7406\u8bf4\u660e"}))))),O.a.createElement(p["a"],{style:{marginBottom:16}},O.a.createElement(u["a"],{className:"margin-right",onClick:this.chooseOpen},"\u9009\u62e9\u8d44\u4ea7"),O.a.createElement(u["a"],{className:"margin-right"},"\u5220\u9664")),O.a.createElement(c["a"],{dataSource:r,columns:d,size:"small",pagination:!1,scroll:{x:1500,y:230},rowKey:function(e){return e.id}}))),O.a.createElement(D["b"],this.chooseModalProps))}},{key:"chooseModalProps",get:function(){var e=this,t=this.state.chooseVisible;return{width:960,visible:t,handleChooseCancel:function(){e.setState(b()({},t,{chooseVisible:!1}))},handleChooseOk:function(t,a){e.setState({chooseVisible:!1,selectedRows:t,selectedRowKeys:a})}}}}]),t}(V["PureComponent"]),r=i))||r);a.d(t,"default",function(){return X});var W=S["a"].RangePicker,X=(l=Object(Y["connect"])(function(e){var t=e.scrap,a=e.loading;return{scrap:t,loading:a}}),l((o=function(e){function t(){var e,a;x()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=_()(this,(e=R()(t)).call.apply(e,[this].concat(r))),a.state={selectedRowKeys:[]},a.handleRefresh=function(e){var t=a.props.location,n=t.query,r=t.pathname;M["k"].push({pathname:r,search:Object(T["stringify"])(b()({},n,e),{arrayFormat:"repeat"})})},a}return P()(t,e),k()(t,[{key:"render",value:function(){var e=function(e,t,a){return{children:e,props:{rowSpan:t.rowSpan}}},t=[{title:O.a.createElement(w["a"],null),dataIndex:"",render:function(e,t,a){return{children:O.a.createElement(w["a"],null),props:{rowSpan:t.rowSpan}}}},{title:"\u6e05\u7406\u5355\u53f7",dataIndex:"bill_no",render:function(e,t){return{children:O.a.createElement("a",null,e),props:{rowSpan:t.rowSpan}}}},{title:"\u6e05\u7406\u65e5\u671f",dataIndex:"bill_date",render:e},{title:"\u6e05\u7406\u4eba",dataIndex:"deal_man",render:e},{title:"\u6e05\u7406\u8bf4\u660e",dataIndex:"remark",render:e},{title:"\u8d44\u4ea7\u660e\u7ec6",children:[{title:"\u8d44\u4ea7\u7f16\u7801",dataIndex:"asset.barcode"},{title:"\u8d44\u4ea7\u7c7b\u522b",dataIndex:"asset_type"},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"asset.name"},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"asset.specs"},{title:"SN\u53f7",dataIndex:"asset.SNNo"},{title:"\u91d1\u989d",dataIndex:"asset.money"},{title:"\u4f7f\u7528\u516c\u53f8",dataIndex:"asset.using_company_name"},{title:"\u4f7f\u7528\u90e8\u95e8",dataIndex:"using_department"},{title:"\u4f7f\u7528\u4eba",dataIndex:"using_people"},{title:"\u7ba1\u7406\u5458",dataIndex:"manager"},{title:"\u6240\u5c5e\u516c\u53f8",dataIndex:"asset.belong_company_name"},{title:"\u533a\u57df",dataIndex:"asset.area_name"},{title:"\u5b58\u653e\u5730\u70b9",dataIndex:"asset.address",render:function(e){return O.a.createElement(g.a,{tooltip:!0,length:10},e)}}]}],a=O.a.createElement(p["a"],{style:{marginBottom:16}},O.a.createElement(h["a"],{span:20},O.a.createElement(u["a"],{type:"primary",className:"margin-right",icon:"plus",onClick:this.filterProps.handleCreate},"\u65b0\u589e"),O.a.createElement(u["a"],{type:"default",className:"margin-right",icon:"printer"},"\u8fd8\u539f"),O.a.createElement(W,{className:"margin-right",defaultValue:this.filterProps.createTime,onChange:this.filterProps.handleChange}),O.a.createElement(u["a"],{type:"primary",className:"margin-right",icon:"printer"},"\u6253\u5370/\u5bfc\u51fa")));return O.a.createElement(D["h"],{inner:!0},a,O.a.createElement(c["a"],m()({},this.listProps,{columns:t,scroll:{x:1900},size:"middle",rowKey:function(e){return e.id}})),O.a.createElement(U,this.modalProps))}},{key:"listProps",get:function(){var e=this.props,t=e.scrap,a=t.list,n=t.pagination,r=e.loading;this.state.selectedRowKeys;return{pagination:n,loading:r.effects["scrap/query"],dataSource:a}}},{key:"filterProps",get:function(){var e=this,t=this.props,a=t.dispatch,n=t.location.query,r=[];return n.createTime&&n.createTime[0]&&(r[0]=K()(n.createTime[0])),n.createTime&&n.createTime[1]&&(r[1]=K()(n.createTime[1])),{createTime:r,handleCreate:function(){a({type:"scrap/showModal"})},handleChange:function(t,a){e.handleRefresh({createTime:a})}}}},{key:"modalProps",get:function(){var e=this,t=this.props,a=t.scrap,n=a.modalVisible,r=a.currentItem,i=t.dispatch;return{title:"\u8d44\u4ea7\u6e05\u7406\u5355",item:r,visible:n,width:960,onCancel:function(){i({type:"scrap/hideModal"})},onOk:function(t){i({type:"scrap/create",payload:t}).then(function(){e.handleRefresh()})}}}}]),t}(V["PureComponent"]),s=o))||s)},bHhV:function(e,t,a){e.exports={normal:"normal___wQHUs",form:"form___1bGjr"}}}]);