(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{K7nR:function(e,a,t){"use strict";t.r(a);t("Q9mQ");var n,r,l,i,o,c,s,p,d,u=t("diRs"),m=(t("ozfa"),t("MJZm")),h=(t("14J3"),t("BMrR")),y=(t("jCWc"),t("kPKH")),f=(t("qVdP"),t("jsC+")),E=(t("+L6B"),t("2/Rp")),k=(t("Pwec"),t("CtXQ")),g=(t("lUTK"),t("BvKs")),b=(t("miYZ"),t("tsqr")),v=t("p0pE"),_=t.n(v),C=t("2Taf"),w=t.n(C),I=t("vZ4D"),M=t.n(I),T=t("l4Ni"),q=t.n(T),O=t("ujKo"),P=t.n(O),S=t("MhPg"),V=t.n(S),x=t("q1tI"),F=t.n(x),j=t("MuoO"),A=t("7Qib"),B=t("Qyje"),R=t("Kvkj"),D=(t("g9YV"),t("wCAj")),N=(t("Telt"),t("Tckk")),z=t("jehZ"),K=t.n(z),U=(t("2qtc"),t("kLXV")),Q=t("zkqC"),L=t.n(Q),J=U["a"].confirm,Y=function(e){function a(){var e,t;w()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=q()(this,(e=P()(a)).call.apply(e,[this].concat(r))),t.handleMenuClick=function(e,a){var n=t.props,r=n.onDeleteItem,l=n.onEditItem;switch(a.key){case"1":l(e);break;case"2":J({title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761\u8bb0\u5f55\u5417?",onOk:function(){r(e.id)}});break}},t}return V()(a,e),M()(a,[{key:"render",value:function(){var e=this,a=K()({},this.props),t=[{title:"\u7167\u7247",dataIndex:"image",render:function(e){return F.a.createElement(N["a"],{shape:"square",src:e})}},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"asset_name"},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"specs"},{title:"\u8ba1\u91cf\u5355\u4f4d",dataIndex:"measure_unit"},{title:"\u539f\u503c",dataIndex:"money"},{title:"\u8d44\u4ea7\u5206\u7c7b",dataIndex:"asset_type_name"},{title:"\u64cd\u4f5c",key:"operation",render:function(a,t){return F.a.createElement(R["c"],{onMenuClick:function(a){return e.handleMenuClick(t,a)},menuOptions:[{key:"1",name:"\u66f4\u65b0"},{key:"2",name:"\u5220\u9664"}]})}}];return F.a.createElement(D["a"],K()({},a,{pagination:_()({},a.pagination,{showTotal:function(e){return"\u603b\u5171 ".concat(e," \u6761\u8bb0\u5f55")}}),bordered:!0,scroll:{x:800},className:L.a.table,columns:t,simple:!0,size:"middle",rowKey:function(e){return e.id}}))}}]),a}(x["PureComponent"]),Z=Y,X=(t("nRaC"),t("5RzL")),H=(t("5NDa"),t("5rEg")),W=t("Y/ft"),$=t.n(W),G=(t("y8nQ"),t("Vl3Y")),ee=G["a"].Item,ae={labelCol:{span:6},wrapperCol:{span:14}},te=(n=G["a"].create(),n((l=function(e){function a(){var e,t;w()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=q()(this,(e=P()(a)).call.apply(e,[this].concat(r))),t.handleOk=function(){var e=t.props,a=e.onOk,n=e.form.validateFields,r=e.item,l=void 0===r?{}:r;n(function(e,t){if(!e){var n=_()({},t,{money:Number(t.money),asset_type_id:Number(t.asset_type_id),image:l.image});a(n)}})},t}return V()(a,e),M()(a,[{key:"render",value:function(){var e=this.props,a=e.form.getFieldDecorator,t=e.tree,n=e.item,r=void 0===n?{}:n,l=$()(e,["form","tree","item"]);return F.a.createElement(U["a"],K()({},l,{onOk:this.handleOk}),F.a.createElement(G["a"],null,F.a.createElement(ee,K()({label:"\u8d44\u4ea7\u540d\u79f0",hasFeedback:!0},ae),a("asset_name",{initialValue:r.asset_name,rules:[{required:!0}]})(F.a.createElement(H["a"],{placeholder:"\u8d44\u4ea7\u540d\u79f0"}))),F.a.createElement(ee,K()({label:"\u578b\u53f7\u89c4\u683c",hasFeedback:!0},ae),a("specs",{initialValue:r.specs,rules:[{required:!0}]})(F.a.createElement(H["a"],{placeholder:"\u578b\u53f7\u89c4\u683c"}))),F.a.createElement(ee,K()({label:"\u8ba1\u91cf\u5355\u4f4d",hasFeedback:!0},ae),a("measure_unit",{initialValue:r.measure_unit,rules:[{required:!0}]})(F.a.createElement(H["a"],{placeholder:"\u8ba1\u91cf\u5355\u4f4d"}))),F.a.createElement(ee,K()({label:"\u539f\u503c",hasFeedback:!0},ae),a("money",{initialValue:r.money,rules:[{pattern:/^(([1-9]\d*)|\d)(\.\d{1,2})?$/,message:"\u8bf7\u8f93\u5165\u91d1\u989d"}]})(F.a.createElement(H["a"],{prefix:"\uffe5",placeholder:"\u539f\u503c"}))),F.a.createElement(ee,K()({label:"\u8d44\u4ea7\u5206\u7c7b",hasFeedback:!0},ae),a("asset_type_id",{initialValue:r.asset_type_id||null,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8d44\u4ea7\u5206\u7c7b"}]})(F.a.createElement(X["a"],{treeData:t,placeholder:"\u8bf7\u9009\u62e9\u8d44\u4ea7\u5206\u7c7b",treeDefaultExpandAll:!0,disabled:!0}))),F.a.createElement(ee,K()({label:"\u7167\u7247",hasFeedback:!0},ae),a("photos")(F.a.createElement(R["a"],this.uploadProps)))))}},{key:"uploadProps",get:function(){var e=this.props,a=e.onImgChange,t=e.item,n=void 0===t?{}:t;return{imageUrl:n.image,onImgChange:function(e){a(e)}}}}]),a}(x["PureComponent"]),r=l))||r),ne=(t("BoS7"),t("Sdc0")),re=G["a"].Item,le={labelCol:{span:6},wrapperCol:{span:14}},ie=(i=G["a"].create(),i((c=function(e){function a(){var e,t;w()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=q()(this,(e=P()(a)).call.apply(e,[this].concat(r))),t.handleOk=function(){var e=t.props,a=e.onOk,n=e.form.validateFields,r=e.item,l=void 0===r?{}:r;n(function(e,t){if(!e){var n=_()({},t,{parent_id:l.parent_id});a(n)}})},t}return V()(a,e),M()(a,[{key:"render",value:function(){var e=this.props,a=e.form.getFieldDecorator,t=e.item,n=void 0===t?{}:t,r=$()(e,["form","item"]);return F.a.createElement(U["a"],K()({},r,{onOk:this.handleOk}),F.a.createElement(G["a"],null,F.a.createElement(h["a"],null,F.a.createElement(y["a"],null,F.a.createElement(re,K()({label:"\u5206\u7c7b\u540d\u79f0",hasFeedback:!0},le),a("name",{initialValue:n.name,rules:[{required:!0}]})(F.a.createElement(H["a"],{placeholder:"\u5206\u7c7b\u540d\u79f0"}))))),F.a.createElement(h["a"],null,F.a.createElement(y["a"],null,F.a.createElement(re,K()({label:"\u5206\u7c7b\u7f16\u7801",hasFeedback:!0},le),a("code",{initialValue:n.code,rules:[{required:!0}]})(F.a.createElement(H["a"],{placeholder:"\u5206\u7c7b\u7f16\u7801"}))))),F.a.createElement(re,K()({label:"\u542f\u7528",hasFeedback:!0},le),a("enable",{valuePropName:"checked",initialValue:!0})(F.a.createElement(ne["a"],null)))))}}]),a}(x["PureComponent"]),o=c))||o);t.d(a,"default",function(){return oe});var oe=(s=Object(j["connect"])(function(e){var a=e.specs,t=e.loading;return{specs:a,loading:t}}),s((d=function(e){function a(){var e,t;w()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=q()(this,(e=P()(a)).call.apply(e,[this].concat(r))),t.state={typeModalVisible:!1},t.handleRefresh=function(e){var a=t.props.location,n=a.query,r=a.pathname;A["k"].push({pathname:r,search:Object(B["stringify"])(_()({},n,e),{arrayFormat:"repeat"})})},t.onSelect=function(e,a){var n=t.props,r=n.dispatch,l=n.location.pathname,i=e[0];A["k"].push({pathname:l,search:Object(B["stringify"])({type:e[0]})}),r({type:"specs/selectNode",payload:{id:i}})},t.handleTyepButton=function(e){var a=t.props,n=a.dispatch,r=(a.location.query,a.specs.selectedItem);if(r.id)switch(e){case"add":n({type:"specs/showTModal",payload:{tModalType:"create",currentItem:{parent_id:r.parent_id}}});break;case"addChild":n({type:"specs/showTModal",payload:{tModalType:"create",currentItem:{parent_id:r.id}}});break;case"edit":n({type:"specs/showTModal",payload:{tModalType:"update",currentItem:r}});break;case"del":n({type:"specs/deleteType",payload:{id:r.id}}).then(function(){t.handleRefresh({type:""})});break}else b["a"].error("\u8bf7\u5148\u9009\u62e9\u8d44\u4ea7\u5206\u7c7b.")},t.handleCreate=function(e){var a=t.props,n=a.dispatch,r=a.location.query;n({type:"specs/showModal",payload:{currentItem:{asset_type_id:r.type}}})},t}return V()(a,e),M()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.specs.tree,n=a.location.query,r=F.a.createElement("div",{style:{width:400}},F.a.createElement("p",null,"SAU=Standard Asset Unit\uff08\u6807\u51c6\u8d44\u4ea7\u578b\u53f7\uff09\u3002\u5373\u8d44\u4ea7\u5206\u7c7b\u4e0b\u7684\u57fa\u672c\u578b\u53f7\u3002 \u7528\u4e8e\u7ec6\u5206\u8d44\u4ea7\u5206\u7c7b\uff0c\u4f7f\u5176\u66f4\u52a0\u65b9\u4fbf\u7edf\u8ba1\u548c\u7ba1\u7406\u3002\u53ef\u4ee5\u8bbe\u7f6e\u6807\u51c6\u578b\u53f7\u7684\u6240\u5c5e\u8d44\u4ea7\u5206\u7c7b\u3001\u6807\u51c6\u540d\u79f0\u3001\u89c4\u683c\u578b\u53f7\u3001\u5355\u4f4d\u3001\u91d1\u989d\u7b49\u3002 \u901a\u8fc7\u6807\u51c6\u8d44\u4ea7\u578b\u53f7\u53ef\u4f7f\u5168\u96c6\u56e2\u3001\u516c\u53f8\u5bf9\u8d44\u4ea7\u7684\u91c7\u8d2d\u3001\u547d\u540d\u6807\u51c6\u5316\u3002"),F.a.createElement("p",null,"\u4f8b\u5982\uff1a\u8d44\u4ea7\u5206\u7c7b\u3010\u7535\u8111\u3011\u4e0b\u6709\u660e\u7ec6\u5206\u7c7b\uff1a\u7b14\u8bb0\u672c\u3001\u53f0\u5f0f\u673a\u3002 \u4e3a\u4e86\u7ba1\u7406\u3010\u7b14\u8bb0\u672c\u3011\u4e0b\u7684\u7ec6\u5206\u578b\u53f7\uff0c\u5982\u5fae\u8f6fSurface4 \u3001\u82f9\u679cMacBook\u7b49\uff0c\u53ef\u4f5c\u4e3aSAU\uff0c\u5373\u6807\u51c6\u8d44\u4ea7\u578b\u53f7\u3002 \u5728\u5458\u5de5\u9886\u501f\u7533\u8bf7\u65f6\uff0c\u53ef\u6309SAU\u7533\u8bf7\uff1b\u7edf\u8ba1\u8d44\u4ea7\u5206\u7c7b\u4f7f\u7528\u60c5\u51b5\u65f6\uff0c\u53ef\u4ee5\u770b\u5230\u66f4\u52a0\u660e\u6670\u7684SAU\u72b6\u6001\u7edf\u8ba1\u3002"),F.a.createElement("p",null,"\u5728\u3010\u8d44\u4ea7\u7ba1\u7406\u3011->\u3010\u8bbe\u7f6e\u3011->\u3010\u8d44\u4ea7\u5206\u7c7b\u3011\u9875\u9762\uff0c\u7528\u6237\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u5206\u7c7b\u6dfb\u52a0\u6807\u51c6\u8d44\u4ea7\u578b\u53f7\u3002 \u5f53\u65b0\u589e\u8d44\u4ea7\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u6240\u5c5e\u7684\u6807\u51c6\u8d44\u4ea7\u578b\u53f7\u3002")),l=F.a.createElement(g["a"],null,F.a.createElement(g["a"].Item,{onClick:function(a){return e.handleTyepButton("add")}},"\u65b0\u589e\u540c\u7ea7"),F.a.createElement(g["a"].Item,{onClick:function(a){return e.handleTyepButton("addChild")}},"\u65b0\u589e\u4e0b\u7ea7"),F.a.createElement(g["a"].Item,{onClick:function(a){return e.handleTyepButton("edit")}},"\u7f16\u8f91"));return F.a.createElement(R["h"],{inner:!0},F.a.createElement(h["a"],null,F.a.createElement(y["a"],{span:6},F.a.createElement(h["a"],null,F.a.createElement(y["a"],{span:2},F.a.createElement(f["a"],{overlay:l,placement:"bottomLeft",className:"margin-right"},F.a.createElement(E["a"],{type:"primary"},"\u65b0\u589e\u5206\u7c7b",F.a.createElement(k["a"],{type:"down"}))))),F.a.createElement(m["a"],{showLine:!1,showIcon:!0,fieldNames:{label:"title",value:"value",children:"children"},defaultExpandAll:!0,defaultSelectedKeys:[n.type],onSelect:this.onSelect,treeData:t})),F.a.createElement(y["a"],{span:18},F.a.createElement(h["a"],{style:{marginBottom:16},type:"flex",align:"middle",justify:"space-between"},F.a.createElement(E["a"],{type:"primary",icon:"plus",onClick:this.handleCreate},"\u65b0\u589e\u6807\u51c6\u8d44\u4ea7\u578b\u53f7"),F.a.createElement("div",null,F.a.createElement(u["a"],{content:r,title:"\u4ec0\u4e48\u662f\u6807\u51c6\u8d44\u4ea7\u578b\u53f7?",trigger:"hover"},F.a.createElement(k["a"],{type:"question-circle",theme:"outlined",style:{fontSize:"18px"}})))),F.a.createElement(Z,this.listProps))),F.a.createElement(te,this.modalProps),F.a.createElement(ie,this.typeModalProps))}},{key:"listProps",get:function(){var e=this,a=this.props,t=a.dispatch,n=a.specs,r=n.list,l=n.pagination,i=a.loading,o=a.location,c=o.query,s=o.pathname;return{pagination:l,dataSource:r,loading:i.effects["specs/query"],onChange:function(e){A["k"].push({pathname:s,search:Object(B["stringify"])(_()({},c,{page:e.current,pageSize:e.pageSize}))})},onDeleteItem:function(a){t({type:"specs/delete",payload:{id:a}}).then(function(){e.handleRefresh()})},onEditItem:function(e){t({type:"specs/showModal",payload:{modalType:"update",currentItem:e}})}}}},{key:"modalProps",get:function(){var e=this,a=this.props,t=a.specs,n=t.modalVisible,r=t.currentItem,l=t.modalType,i=t.tree,o=a.dispatch;return{tree:i,item:r,visible:n,title:"create"===l?"\u6dfb\u52a0":"\u4fee\u6539",onImgChange:function(e){o({type:"asset/showModal",payload:{currentItem:_()({},r,{image:e})}})},onOk:function(a){o({type:"specs/".concat(l),payload:a}).then(function(){e.handleRefresh()})},onCancel:function(){o({type:"specs/hideModal",payload:{}})}}}},{key:"typeModalProps",get:function(){var e=this,a=this.props,t=a.specs,n=t.tModalVisible,r=t.currentItem,l=t.tModalType,i=a.dispatch;return{item:r,visible:n,title:"\u6dfb\u52a0",onCancel:function(){i({type:"specs/hideTModal"})},onOk:function(a){i({type:"specs/".concat(l,"Type"),payload:a}).then(function(){e.handleRefresh()})}}}}]),a}(x["PureComponent"]),p=d))||p)},zkqC:function(e,a,t){e.exports={table:"table___BV75_","ant-table-pagination":"ant-table-pagination___162gE","ant-pagination":"ant-pagination___3xT1E"}}}]);