(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[65],{"0Kwj":function(e,a,t){e.exports={form:"form___3f_Cx"}},Y4jM:function(e,a,t){"use strict";t.r(a);t("g9YV");var n,r,l,o,i,c,d,s,p=t("wCAj"),u=t("jehZ"),m=t.n(u),h=(t("14J3"),t("BMrR")),f=(t("jCWc"),t("kPKH")),y=(t("nRaC"),t("5RzL")),g=(t("/zsF"),t("PArb")),k=(t("+L6B"),t("2/Rp")),E=(t("+BJd"),t("mr32")),v=(t("Telt"),t("Tckk")),b=t("p0pE"),w=t.n(b),C=t("2Taf"),_=t.n(C),V=t("vZ4D"),x=t.n(V),F=t("l4Ni"),I=t.n(F),j=t("ujKo"),q=t.n(j),P=t("MhPg"),D=t.n(P),O=(t("y8nQ"),t("Vl3Y")),S=(t("5NDa"),t("5rEg")),M=(t("2qtc"),t("kLXV")),R=t("q1tI"),z=t.n(R),A=t("MuoO"),K=t("Kvkj"),T=t("wY1l"),N=t.n(T),Z=t("ZD0w"),B=t("7Qib"),L=t("Qyje"),Y=(t("BoS7"),t("Sdc0")),H=(t("7Kak"),t("9yH6")),J=t("Y/ft"),Q=t.n(J),G=t("0Kwj"),W=t.n(G),X=O["a"].Item,$={labelCol:{span:6},wrapperCol:{span:14}},U=(n=O["a"].create(),n((l=function(e){function a(){var e,t;_()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=I()(this,(e=q()(a)).call.apply(e,[this].concat(r))),t.handleOk=function(){var e=t.props,a=e.item,n=void 0===a?{}:a,r=e.onOk,l=e.form,o=l.validateFields,i=l.getFieldsValue,c=l.getFieldValue;o(function(e){if(!e){var a=w()({},i(),{key:n.key,department_id:Number(c("department_id"))});r(a)}})},t}return D()(a,e),x()(a,[{key:"render",value:function(){var e=this.props,a=e.item,t=void 0===a?{}:a,n=e.options,r=e.form.getFieldDecorator,l=Q()(e,["item","options","form"]);return z.a.createElement(M["a"],m()({},l,{onOk:this.handleOk}),z.a.createElement(O["a"],{layout:"horizontal",className:W.a.form},z.a.createElement(X,m()({label:"\u59d3\u540d",hasFeedback:!0},$),r("name",{initialValue:t.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(z.a.createElement(S["a"],null))),z.a.createElement(X,m()({label:"\u6027\u522b",hasFeedback:!0},$),r("male",{initialValue:t.male,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}]})(z.a.createElement(H["a"].Group,null,z.a.createElement(H["a"],{value:!0},"\u7537"),z.a.createElement(H["a"],{value:!1},"\u5973")))),z.a.createElement(X,m()({label:"\u7535\u8bdd",hasFeedback:!0},$),r("phone",{initialValue:t.phone,rules:[{required:!0,pattern:/^1[34578]\d{9}$/,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}]})(z.a.createElement(S["a"],null))),z.a.createElement(X,m()({label:"\u90ae\u7bb1",hasFeedback:!0},$),r("email",{initialValue:t.email,rules:[{required:!0,pattern:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}]})(z.a.createElement(S["a"],null))),z.a.createElement(X,m()({label:"\u90e8\u95e8",hasFeedback:!0},$),r("department_id",{initialValue:t.department_id,rules:[{required:!0}]})(z.a.createElement(y["a"],{allowClear:!0,treeDefaultExpandAll:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8bf7\u9009\u62e9",treeData:n.dept_tree}))),z.a.createElement(X,m()({label:"\u5728\u804c",hasFeedback:!0},$),r("status",{valuePropName:"checked",initialValue:void 0==t.status||t.status})(z.a.createElement(Y["a"],null)))))}}]),a}(R["PureComponent"]),r=l))||r),ee=U;t.d(a,"default",function(){return ne});var ae=M["a"].confirm,te=S["a"].Search,ne=(o=Object(Z["withI18n"])(),i=O["a"].create(),c=Object(A["connect"])(function(e){var a=e.employee,t=e.loading;return{employee:a,loading:t}}),o(d=i(d=c((s=function(e){function a(){var e,t;_()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=I()(this,(e=q()(a)).call.apply(e,[this].concat(r))),t.handleRefresh=function(e){var a=t.props.location,n=a.query,r=a.pathname;B["k"].push({pathname:r,search:Object(L["stringify"])(w()({},n,e),{arrayFormat:"repeat"})})},t.handleSubmit=function(){var e=t.props.form.getFieldsValue,a=e();console.log(a),t.handleRefresh(w()({},a))},t.handleChange=function(e,a){t.handleRefresh({department:e})},t.handleCreate=function(){var e=t.props.dispatch;e({type:"employee/showModal",payload:{modalType:"create"}})},t.handleMenuClick=function(e,a){var n=t.props.dispatch;switch(a){case"edit":n({type:"employee/showModal",payload:{modalType:"update",currentItem:e}});break;case"del":ae({title:"\u5220\u9664\u8fd9\u6761\u8bb0\u5f55\u5417\uff1f",onOk:function(){t.onDeleteItem(e.id)}});break}},t.onDeleteItem=function(e){var a=t.props,n=a.dispatch,r=a.employee,l=r.list,o=r.pagination;n({type:"employee/delete",payload:e}).then(function(){t.handleRefresh({page:1===l.length&&o.current>1?o.current-1:o.current})})},t}return D()(a,e),x()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.location.query,n=a.form.getFieldDecorator,r=(a.i18n,this.filterProps.options),l=[{title:"\u5934\u50cf",dataIndex:"avatar",key:"avatar",width:72,render:function(e){return z.a.createElement(v["a"],{style:{marginLeft:8},src:e})}},{title:"\u59d3\u540d",dataIndex:"name",key:"name",render:function(e,a){return z.a.createElement(N.a,{to:"employee/".concat(a.id)},e)}},{title:"\u6027\u522b",dataIndex:"male",key:"male",render:function(e){return z.a.createElement("span",null,1==e?"\u7537":"\u5973")}},{title:"\u90e8\u95e8",dataIndex:"department_name",key:"department_name"},{title:"\u7535\u8bdd",dataIndex:"phone",key:"phone"},{title:"\u90ae\u4ef6",dataIndex:"email",key:"email"},{title:"\u5728\u804c\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){return z.a.createElement("span",null,e?z.a.createElement(E["a"],{color:"#1890ff"},"\u5728\u804c"):z.a.createElement(E["a"],{color:"red"},"\u79bb\u804c"))}},{title:"\u64cd\u4f5c",key:"action",render:function(a,t){return z.a.createElement("span",null,z.a.createElement(k["a"],{shape:"round",onClick:function(a){return e.handleMenuClick(t,"edit")}},"\u7f16\u8f91"),z.a.createElement(g["a"],{type:"vertical"}),z.a.createElement(k["a"],{shape:"round",type:"danger",onClick:function(a){return e.handleMenuClick(t,"del")}},"\u5220\u9664"))}}];return z.a.createElement(K["h"],{inner:!0},z.a.createElement(h["a"],{type:"flex",style:{marginBottom:16},align:"middle",justify:"space-between"},z.a.createElement(f["a"],{span:6},z.a.createElement(k["a"],{type:"primary",icon:"plus",className:"margin-right",onClick:this.handleCreate},"\u521b\u5efa"),z.a.createElement(y["a"],{allowClear:!0,style:{width:"60%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8bf7\u9009\u62e9\u90e8\u95e8",treeDefaultExpandAll:!0,defaultValue:t.department,onChange:this.handleChange,treeData:r.dept_tree})),z.a.createElement("div",null),z.a.createElement(f["a"],{span:4},n("q",{initialValue:t.q})(z.a.createElement(te,{placeholder:"\u641c\u7d22\u540d\u79f0",onSearch:this.handleSubmit})))),z.a.createElement(p["a"],m()({},this.listProps,{pagination:w()({},this.listProps.pagination,{showTotal:function(e){return"\u603b\u5171 ".concat(e," \u6761\u8bb0\u5f55")}}),columns:l,size:"middle",rowKey:function(e){return e.id}})),z.a.createElement(ee,this.modalProps))}},{key:"filterProps",get:function(){var e=this.props.employee.options;return{options:e}}},{key:"modalProps",get:function(){var e=this,a=this.props,t=a.dispatch,n=a.loading,r=a.location.query,l=a.employee,o=l.modalVisible,i=l.modalType,c=l.currentItem,d=l.options;return{options:d,item:"create"===i?{department_id:r.department}:c,visible:o,title:"create"==i?"\u6dfb\u52a0\u5458\u5de5":"\u4fee\u6539",destroyOnClose:!0,maskClosable:!1,confirmLoading:n.effects["employee/".concat(i)],centered:!0,onOk:function(a){t({type:"employee/".concat(i),payload:a}).then(function(){e.handleRefresh()})},onCancel:function(){t({type:"employee/hideModal"})}}}},{key:"listProps",get:function(){var e=this,a=this.props,t=a.employee,n=t.list,r=t.pagination,l=a.loading;return{pagination:r,loading:l.effects["employee/query"],dataSource:n,onChange:function(a){e.handleRefresh({page:a.current,pageSize:a.pageSize})}}}}]),a}(R["PureComponent"]),d=s))||d)||d)||d)}}]);