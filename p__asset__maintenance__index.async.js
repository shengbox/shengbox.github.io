(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{"7mes":function(e,a,t){e.exports={normal:"normal___xcCBJ",form:"form___2b7h3"}},Saa0:function(e,a,t){"use strict";t.r(a);t("g9YV");var n,r,l,i,o,d,c=t("wCAj"),s=t("jehZ"),m=t.n(s),p=(t("14J3"),t("BMrR")),u=(t("jCWc"),t("kPKH")),h=(t("+L6B"),t("2/Rp")),f=(t("zYCJ"),t("4dqd")),E=t.n(f),b=(t("sRBo"),t("kaz8")),_=t("p0pE"),x=t.n(_),y=t("2Taf"),I=t.n(y),g=t("vZ4D"),w=t.n(g),v=t("l4Ni"),k=t.n(v),C=t("ujKo"),S=t.n(C),Y=t("MhPg"),N=t.n(Y),P=(t("iQDF"),t("+eQT")),V=t("q1tI"),M=t.n(V),D=t("MuoO"),T=t("7Qib"),O=t("Qyje"),R=t("wd/R"),F=t.n(R),K=t("Kvkj"),j=(t("2qtc"),t("kLXV")),q=t("Y/ft"),z=t.n(q),B=(t("OaEy"),t("2fM7")),J=(t("5NDa"),t("5rEg")),Q=(t("y8nQ"),t("Vl3Y")),A=t("7mes"),L=t.n(A),Z=Q["a"].Item,H=J["a"].TextArea,W=B["a"].Option,X={labelCol:{span:6},wrapperCol:{span:14}},G={labelCol:{span:3},wrapperCol:{span:19}},U=(n=Q["a"].create(),n((l=function(e){function a(){var e,t;I()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=k()(this,(e=S()(a)).call.apply(e,[this].concat(r))),t.state={chooseVisible:!1,selectedRowKeys:[],selectedRows:[]},t.handleOk=function(){var e=t.state.selectedRowKeys,a=t.props,n=a.onOk,r=a.form.validateFields;r(function(a,t){if(!a){var r=x()({},t,{maintenance_people:Number(t.maintenance_people),asset_id:e,bill_date:F()(t.bill_date).format("YYYY-MM-DD"),maintenance_expired_date:F()(t.maintenance_expired_date).format("YYYY-MM-DD")});n(r)}})},t.chooseOpen=function(){t.setState({chooseVisible:!0})},t}return N()(a,e),w()(a,[{key:"render",value:function(){var e=this.state,a=e.chooseVisible,t=e.selectedRows,n=this.props,r=n.form.getFieldDecorator,l=n.item,i=void 0===l?{}:l,o=n.visible,d=n.users,s=z()(n,["form","item","visible","users"]),f=d.map(function(e){return M.a.createElement(W,{key:e.id},e.name)}),b=[{title:"\u5e8f\u53f7",dataIndex:"\u5e8f\u53f7",width:60,render:function(e,a,t){return M.a.createElement("span",null,t+1)}},{title:"\u8d44\u4ea7\u6761\u7801",dataIndex:"barcode",width:150,render:function(e){return M.a.createElement(E.a,{tooltip:!0,length:10},e)}},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"name",width:150},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"specs",width:150},{title:"SN\u53f7",dataIndex:"SNNo",width:150},{title:"\u4f9b\u5e94\u5546",dataIndex:"provider",width:150},{title:"\u8054\u7cfb\u4eba",dataIndex:"provider_contact",width:100},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"provider_phone",width:150},{title:"\u8d1f\u8d23\u4eba",dataIndex:"maintenance_people",width:150},{title:"\u7ef4\u4fdd\u5230\u671f\u65e5",dataIndex:"maintenance_expired_date",width:150},{title:"\u7ef4\u4fdd\u8bf4\u660e",dataIndex:"maintenance_memo",width:200,render:function(e){return M.a.createElement(E.a,{tooltip:!0,length:10},e)}}];return M.a.createElement("div",null,M.a.createElement(j["a"],m()({},s,{visible:o&&!a,onOk:this.handleOk,style:{height:150}}),M.a.createElement(Q["a"],{className:L.a.form},M.a.createElement(p["a"],null,M.a.createElement(u["a"],{span:12},M.a.createElement(Z,m()({label:"\u53d8\u66f4\u5355\u53f7",hasFeedback:!0},X),r("bill_no",{rules:[]})(M.a.createElement(J["a"],{disabled:!0,readOnly:!0,placeholder:"\u53d8\u66f4\u5355\u53f7"})))),M.a.createElement(u["a"],{span:12},M.a.createElement(Z,m()({label:"\u4e1a\u52a1\u65e5\u671f",hasFeedback:!0},X),r("bill_date",{initialValue:F()(new Date,"YYYY-MM-DD"),rules:[{required:!0}]})(M.a.createElement(P["a"],{style:{width:"100%"}}))))),M.a.createElement(p["a"],{style:{marginBottom:16}},M.a.createElement(h["a"],{className:"margin-right",onClick:this.chooseOpen},"\u9009\u62e9\u8d44\u4ea7"),M.a.createElement(h["a"],{className:"margin-right"},"\u5220\u9664")),M.a.createElement(c["a"],{dataSource:t,columns:b,size:"small",pagination:!1,scroll:{x:1500,y:230},rowKey:function(e){return e.id}}),M.a.createElement("br",null),M.a.createElement(p["a"],null,M.a.createElement(u["a"],{span:8},M.a.createElement(Z,m()({label:"\u4f9b\u5e94\u5546",hasFeedback:!0},X),r("provider",{initialValue:i.provider,rules:[]})(M.a.createElement(J["a"],{placeholder:"\u4f9b\u5e94\u5546"})))),M.a.createElement(u["a"],{span:8},M.a.createElement(Z,m()({label:"\u8054\u7cfb\u4eba",hasFeedback:!0},X),r("provider_contact",{initialValue:i.provider_contact,rules:[]})(M.a.createElement(J["a"],{placeholder:"\u8054\u7cfb\u4eba"})))),M.a.createElement(u["a"],{span:8},M.a.createElement(Z,m()({label:"\u8054\u7cfb\u7535\u8bdd",hasFeedback:!0},X),r("provider_phone",{initialValue:i.provider_phone,rules:[]})(M.a.createElement(J["a"],{placeholder:"\u8054\u7cfb\u7535\u8bdd"}))))),M.a.createElement(p["a"],null,M.a.createElement(u["a"],{span:8},M.a.createElement(Z,m()({label:"\u8d23\u4efb\u4eba",hasFeedback:!0},X),r("maintenance_people",{initialValue:i.maintenance_people,rules:[]})(M.a.createElement(B["a"],null,f)))),M.a.createElement(u["a"],{span:8},M.a.createElement(Z,m()({label:"\u7ef4\u4fdd\u5230\u671f",hasFeedback:!0},X),r("maintenance_expired_date",{initialValue:i.maintenance_expired_date?F()(i.maintenance_expired_date,"YYYY-MM-DD"):null,rules:[]})(M.a.createElement(P["a"],{style:{width:"100%"}}))))),M.a.createElement(p["a"],null,M.a.createElement(u["a"],{span:16},M.a.createElement(Z,m()({label:"\u5907\u6ce8",hasFeedback:!0},G),r("maintenance_memo",{initialValue:i.maintenance_memo})(M.a.createElement(H,{rows:4}))))))),M.a.createElement(K["b"],this.chooseModalProps))}},{key:"chooseModalProps",get:function(){var e=this,a=this.state.chooseVisible;return{width:960,visible:a,handleChooseCancel:function(){e.setState(x()({},a,{chooseVisible:!1}))},handleChooseOk:function(a,t){e.setState({chooseVisible:!1,selectedRows:a,selectedRowKeys:t})}}}}]),a}(V["PureComponent"]),r=l))||r),$=(t("bP8k"),t("gFTJ")),ee=(t("Telt"),t("Tckk")),ae=function(e){function a(){return I()(this,a),k()(this,S()(a).apply(this,arguments))}return N()(a,e),w()(a,[{key:"render",value:function(){var e=[{title:"\u5e8f\u53f7",dataIndex:"no",render:function(e,a,t){return M.a.createElement("span",null,t+1)}},{title:"\u7167\u7247",dataIndex:"image",render:function(e){return M.a.createElement(ee["a"],{style:{marginLeft:4},src:e})}},{title:"\u8d44\u4ea7\u6761\u7801",dataIndex:"barcode"},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"name"},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"specs"},{title:"SNNo",dataIndex:"SNNo"},{title:"\u53d8\u66f4\u524d\u6240\u5c5e\u516c\u53f8",dataIndex:"belong_company_name"},{title:"\u53d8\u66f4\u524d\u91d1\u989d",dataIndex:"money"}],a=this.props,t=a.item,n=void 0===t?{}:t,r=z()(a,["item"]);return M.a.createElement(j["a"],m()({},r,{footer:null}),M.a.createElement($["a"],{bordered:!0,size:"middle"},M.a.createElement($["a"].Item,{label:"\u53d8\u66f4\u5355\u53f7"},n.bill_no),M.a.createElement($["a"].Item,{label:"\u4e1a\u52a1\u65e5\u671f"},n.bill_date),M.a.createElement($["a"].Item,{label:"\u5904\u7406\u4eba"},n.deal_man),M.a.createElement($["a"].Item,{label:"\u6240\u5c5e\u516c\u53f8\u53d8\u66f4\u4e3a"},"\u676d\u5dde\u9f99\u4f2f\u79d1\u6280\u6709\u9650\u516c\u53f8"),M.a.createElement($["a"].Item,{label:"\u91d1\u989d\u53d8\u66f4\u4e3a",span:2},n.money),M.a.createElement($["a"].Item,{label:"\u53d8\u66f4\u8bf4\u660e",span:3},n.remark)),M.a.createElement("br",null),M.a.createElement(c["a"],{dataSource:n.asset,pagination:!1,columns:e,size:"middle",rowKey:function(e){return e.id}}))}}]),a}(V["PureComponent"]);t.d(a,"default",function(){return ne});var te=P["a"].RangePicker,ne=(i=Object(D["connect"])(function(e){var a=e.maintenance,t=e.loading;return{maintenance:a,loading:t}}),i((d=function(e){function a(){var e,t;I()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=k()(this,(e=S()(a)).call.apply(e,[this].concat(r))),t.handleRefresh=function(e){var a=t.props.location,n=a.query,r=a.pathname;T["k"].push({pathname:r,search:Object(O["stringify"])(x()({},n,e),{arrayFormat:"repeat"})})},t.handleDetail=function(e){var a=t.props.dispatch;a({type:"maintenance/showDetail",payload:e})},t}return N()(a,e),w()(a,[{key:"render",value:function(){var e=this,a=function(e,a,t){return{children:e,props:{rowSpan:a.rowSpan}}},t=[{title:M.a.createElement(b["a"],null),dataIndex:"",render:function(e,a,t){return{children:M.a.createElement(b["a"],null),props:{rowSpan:a.rowSpan}}}},{title:"\u7b7e\u5b57",dataIndex:"SignatureStatus",width:100,render:a},{title:"\u53d8\u66f4\u5355\u53f7",dataIndex:"bill_no",render:function(a,t){return{children:M.a.createElement("a",{onClick:function(a){return e.handleDetail(t)}},a),props:{rowSpan:t.rowSpan}}}},{title:"\u4e1a\u52a1\u65e5\u671f",dataIndex:"bill_date",render:a},{title:"\u5904\u7406\u4eba",dataIndex:"create_user_name",render:a},{title:"\u4f9b\u5e94\u5546",dataIndex:"provider",render:a},{title:"\u8054\u7cfb\u4eba",dataIndex:"provider_contact",render:a},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"provider_phone",render:a},{title:"\u8d1f\u8d23\u4eba",dataIndex:"maintenance_people_name",render:a},{title:"\u7ef4\u4fdd\u5230\u671f\u65e5",dataIndex:"maintenance_expired_date",render:a},{title:"\u8d44\u4ea7\u660e\u7ec6",children:[{title:"\u8d44\u4ea7\u7f16\u7801",dataIndex:"asset.barcode"},{title:"\u8d44\u4ea7\u7c7b\u522b",dataIndex:"asset_type"},{title:"\u8d44\u4ea7\u540d\u79f0",dataIndex:"asset.name"},{title:"\u89c4\u683c\u578b\u53f7",dataIndex:"asset.specs"},{title:"SN\u53f7",dataIndex:"asset.SNNo"},{title:"\u91d1\u989d",dataIndex:"asset.money"},{title:"\u4f7f\u7528\u516c\u53f8",dataIndex:"asset.using_company_name"},{title:"\u4f7f\u7528\u90e8\u95e8",dataIndex:"using_department"},{title:"\u4f7f\u7528\u4eba",dataIndex:"using_people"},{title:"\u7ba1\u7406\u5458",dataIndex:"manager"},{title:"\u6240\u5c5e\u516c\u53f8",dataIndex:"asset.belong_company_name"},{title:"\u533a\u57df",dataIndex:"asset.area_name"},{title:"\u5b58\u653e\u5730\u70b9",dataIndex:"asset.address",render:function(e){return M.a.createElement(E.a,{tooltip:!0,length:10},e)}}]}],n=M.a.createElement(p["a"],{style:{marginBottom:16}},M.a.createElement(u["a"],{span:20},M.a.createElement(h["a"],{type:"primary",className:"margin-right",icon:"plus",onClick:this.filterProps.handleCreate},"\u65b0\u589e"),M.a.createElement(h["a"],{type:"default",className:"margin-right",icon:"printer"},"\u6253\u5370"),M.a.createElement(te,{className:"margin-right",defaultValue:this.filterProps.createTime,onChange:this.filterProps.handleChange})));return M.a.createElement(K["h"],{inner:!0},n,M.a.createElement(c["a"],m()({},this.listProps,{columns:t,scroll:{x:2e3},size:"middle",rowKey:function(e){return e.id}})),M.a.createElement(U,this.modalProps),M.a.createElement(ae,this.detailProps))}},{key:"filterProps",get:function(){var e=this,a=this.props,t=a.dispatch,n=a.location,r=n.query,l=[];return r.createTime&&r.createTime[0]&&(l[0]=F()(r.createTime[0])),r.createTime&&r.createTime[1]&&(l[1]=F()(r.createTime[1])),{createTime:l,handleCreate:function(){t({type:"maintenance/showModal"})},handleChange:function(a,t){e.handleRefresh({createTime:t})}}}},{key:"listProps",get:function(){var e=this.props,a=e.maintenance,t=a.list,n=a.pagination,r=e.loading;return{pagination:n,loading:r.effects["maintenance/query"],dataSource:t}}},{key:"modalProps",get:function(){var e=this,a=this.props,t=a.dispatch,n=a.maintenance,r=n.currentItem,l=n.modalVisible,i=n.users;return{item:r,users:i,title:"\u7ef4\u4fdd\u4fe1\u606f\u53d8\u66f4\u5355",visible:l,width:960,onCancel:function(){t({type:"maintenance/hideModal"})},onOk:function(a){console.log(a),t({type:"maintenance/create",payload:a}).then(function(){e.handleRefresh()})}}}},{key:"detailProps",get:function(){var e=this.props,a=e.dispatch,t=e.maintenance,n=t.modalVisible,r=t.modalType,l=t.currentItem;return{item:l,title:"\u7ef4\u4fee\u4fe1\u606f\u767b\u8bb0",visible:n&&"detail"===r,width:960,onCancel:function(){a({type:"maintenance/hideModal"})}}}}]),a}(V["PureComponent"]),o=d))||o)}}]);