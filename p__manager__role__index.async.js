(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[73],{Oe30:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return D});a("g9YV");var n,r,l,o,i=a("wCAj"),c=a("jehZ"),u=a.n(c),d=(a("jCWc"),a("kPKH")),s=(a("14J3"),a("BMrR")),p=(a("/zsF"),a("PArb")),m=(a("+L6B"),a("2/Rp")),h=a("p0pE"),f=a.n(h),y=a("2Taf"),k=a.n(y),g=a("vZ4D"),E=a.n(g),v=a("l4Ni"),b=a.n(v),C=a("ujKo"),w=a.n(C),M=a("MhPg"),j=a.n(M),I=(a("ozfa"),a("MJZm")),P=(a("2qtc"),a("kLXV")),T=(a("y8nQ"),a("Vl3Y")),F=(a("5NDa"),a("5rEg")),V=a("q1tI"),O=a.n(V),q=a("MuoO"),x=a("7Qib"),A=a("Qyje"),K=a("Kvkj"),R=F["a"].TextArea,J=T["a"].Item,_=P["a"].confirm,z=I["a"].TreeNode,B={labelCol:{span:6},wrapperCol:{span:14}},D=(n=T["a"].create(),r=Object(q["connect"])(function(e){var t=e.role,a=e.loading;return{role:t,loading:a}}),n(l=r((o=function(e){function t(){var e,a;k()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=b()(this,(e=w()(t)).call.apply(e,[this].concat(r))),a.handleRefresh=function(e){var t=a.props.location,n=t.query,r=t.pathname;x["k"].push({pathname:r,search:Object(A["stringify"])(f()({},n,e),{arrayFormat:"repeat"})})},a.handleCreate=function(){var e=a.props.dispatch;e({type:"role/showModal",payload:{modalType:"create",currentItem:{}}})},a.handleMenuClick=function(e,t){var n=a.props,r=n.dispatch,l=n.role,o=l.list,i=l.pagination;switch(t){case"edit":r({type:"role/showModal",payload:{currentItem:e,modalType:"update"}});break;case"del":_({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u8bb0\u5f55?",onOk:function(){r({type:"role/delete",payload:{id:e.id}}).then(function(){a.handleRefresh({page:1===o.length&&i.current>1?i.current-1:i.current})})}});break;case 3:break;default:}},a}return j()(t,e),E()(t,[{key:"render",value:function(){var e=this,t=[{title:"\u89d2\u8272\u540d",dataIndex:"name",key:"name",width:300},{title:"\u5907\u6ce8",dataIndex:"comment",key:"comment"},{title:"\u64cd\u4f5c",key:"action",width:400,render:function(t,a){return O.a.createElement("span",null,O.a.createElement(m["a"],{shape:"round",onClick:function(t){return e.handleMenuClick(a,"edit")}},"\u7f16\u8f91"),O.a.createElement(p["a"],{type:"vertical"}),O.a.createElement(m["a"],{shape:"round",type:"danger",onClick:function(t){return e.handleMenuClick(a,"del")}},"\u5220\u9664"),O.a.createElement(p["a"],{type:"vertical"}),O.a.createElement(m["a"],{shape:"round",onClick:function(t){return e.handleMenuClick(a,t)}},"\u5206\u914d\u7528\u6237"))}}],a=this.props,n=a.form.getFieldDecorator,r=a.role,l=r.currentItem,o=r.menuTree,c=l,h=function e(t){return t.map(function(t){return t.children&&t.children.length?O.a.createElement(z,{key:t.value,title:t.title},e(t.children)):O.a.createElement(z,{key:t.value,title:t.title})})};return O.a.createElement(K["h"],{inner:!0},O.a.createElement(s["a"],{style:{marginBottom:16}},O.a.createElement(d["a"],{span:8},O.a.createElement(s["a"],{type:"flex",justify:"space-between"},O.a.createElement(m["a"],{icon:"plus",type:"primary",onClick:this.handleCreate},"\u65b0\u589e"),O.a.createElement("div",null)))),O.a.createElement(i["a"],u()({},this.listProps,{columns:t,size:"middle",rowKey:function(e){return e.id}})),O.a.createElement(P["a"],u()({},this.modalProps,{bodyStyle:{height:500,overflow:"auto"}}),O.a.createElement(T["a"],null,O.a.createElement(J,u()({label:"\u540d\u79f0",hasFeedback:!0},B),n("name",{initialValue:c.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]})(O.a.createElement(F["a"],{placeholder:"\u540d\u79f0"}))),O.a.createElement(J,u()({label:"\u5907\u6ce8",hasFeedback:!0},B),n("comment",{initialValue:c.comment,rules:[]})(O.a.createElement(R,{rows:3,placeholder:"\u5907\u6ce8"}))),O.a.createElement(J,u()({label:"\u6388\u4e88\u6743\u9650",hasFeedback:!0},B),O.a.createElement(I["a"],{checkable:!0,defaultExpandAll:!0,checkedKeys:c.menu_ids,onCheck:this.modalProps.onCheck},h(o))))))}},{key:"listProps",get:function(){var e=this.props,t=e.loading,a=e.role,n=a.list,r=a.pagination;return{dataSource:n,pagination:r,loading:t.effects["role/query"]}}},{key:"modalProps",get:function(){var e=this,t=this.props,a=t.dispatch,n=t.role,r=n.list,l=n.modalVisible,o=n.modalType,i=n.pagination,c=n.menuTree,u=n.currentItem,d=t.form,s=d.validateFields,p=d.getFieldsValue;return{menuTree:c,title:"create"==o?"\u65b0\u589e\u89d2\u8272":"\u4fee\u6539\u89d2\u8272",visible:l,onCancel:function(){a({type:"role/hideModal"})},onOk:function(t){s(function(t){if(!t){var n=f()({},p(),{menu_ids:u.menu_ids});a({type:"role/".concat(o),payload:n}).then(function(){e.handleRefresh({page:1===r.length&&i.current>1?i.current-1:i.current})})}})},onCheck:function(e){a({type:"role/menuSelected",payload:{currentItem:f()({},u,{menu_ids:e})}})}}}}]),t}(V["PureComponent"]),l=o))||l)||l)}}]);